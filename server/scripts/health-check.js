require('dotenv').config();
const TechFrameworkDB = require('../src/index');

async function healthCheck() {
  const db = new TechFrameworkDB();
  
  try {
    console.log('üîç Running health check...');
    
    // Test Qdrant connection
    const vectorResults = await db.qdrant.searchSimilarFrameworks('test', 1);
    console.log('‚úÖ Qdrant connection: OK');
    
    // Test Appwrite connection
    const dbResults = await db.appwrite.getFrameworks({});
    console.log('‚úÖ Appwrite connection: OK');
    
    // Test external APIs
    const githubTest = await db.github.getRepositoryData('expressjs', 'express');
    console.log('‚úÖ GitHub API: OK');
    
    console.log('\nüìä System Status:');
    console.log(`- Frameworks in database: ${dbResults.length}`);
    console.log(`- Vector search working: ${vectorResults.length >= 0}`);
    console.log(`- Last check: ${new Date().toISOString()}`);
    
  } catch (error) {
    console.error('‚ùå Health check failed:', error.message);
    process.exit(1);
  }
}

healthCheck();